{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detalle Planeación - ICBF Conecta</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
<style>
  * { box-sizing: border-box; margin:0; padding:0; }
  body {
    font-family: 'Roboto', sans-serif;
    background-image: url("{% static 'img/fondito.jpg' %}");
    background-size: cover;
    background-attachment: fixed;
    color: #5e3370;
  }

  header {
    background-color: rgba(255,255,255,0.9);
    display:flex;
    justify-content: space-between;
    align-items:center;
    padding: 15px 30px;
    border-bottom: 2px solid #e5d5f5;
    backdrop-filter: blur(5px);
  }
  header img { height:60px; }

  nav ul {
    display:flex;
    list-style:none;
    gap:15px;
  }
  nav ul li a, nav ul li button {
    color:#9B59B6;
    font-weight:bold;
    text-decoration:none;
    padding:8px 12px;
    border-radius:6px;
    transition:0.3s;
    background:none; border:none; cursor:pointer;
  }
  nav ul li a:hover, nav ul li button:hover { background-color:#f3c1e5; }

  .main-title {
    text-align:center;
    font-size:28px;
    font-weight:bold;
    margin:20px auto;
    padding:20px;
    width:85%;
    background: rgba(255,255,255,0.75);
    border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,0.15);
    color:#7a3eb1;
  }

  .info-cards {
    display:grid;
    grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
    gap:20px;
    max-width:1200px;
    margin: 25px auto;
  }
  .card {
    background: rgba(243,196,255,0.4);
    border-radius:10px;
    padding:15px 20px;
    border:1px solid #d6b4f5;
    box-shadow:0 4px 8px rgba(0,0,0,0.1);
  }
  .card label { font-weight:bold; display:block; margin-bottom:5px; }
  .card p { background: rgba(255,255,255,0.6); padding:8px; border-radius:6px; }

  .table-wrapper {
    max-width:1400px;
    width:95%;
    margin:25px auto;
    overflow-x:auto;
    background: rgba(255,255,255,0.75);
    border-radius:12px;
    padding:20px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
  }
  table { width:100%; border-collapse:collapse; }
  th,td { padding:12px; text-align:left; border:1px solid #ddd; vertical-align:top; }
  th { background:#9B59B6; color:white; }
  td p { background: rgba(243,196,255,0.3); padding:8px; border-radius:6px; }

  .documentos {
    display:flex;
    flex-wrap:wrap;
    gap:15px;
    justify-content:center;
    margin-top:20px;
  }
  .documentos img {
    max-width:150px;
    border-radius:12px;
    box-shadow:0 4px 8px rgba(0,0,0,0.2);
    transition: transform 0.3s ease;
    cursor:pointer;
  }
  .documentos img:hover { transform: scale(1.5); position:relative; z-index:10; }

  .btn-volver {
    display:inline-block;
    text-align:center;
    background:#f3c1e5;
    color:#5e3370;
    font-weight:bold;
    padding:12px 25px;
    border-radius:10px;
    text-decoration:none;
    margin:30px auto;
    transition:0.3s;
  }
  .btn-volver:hover { background:#e8a9d6; }

  @media(max-width:768px){
    .main-title { font-size:24px; width:90%; }
    .info-cards { grid-template-columns:1fr; }
    .documentos img { max-width:90%; }
  }
</style>
</head>
<body>
<header>
  <img src="{% static 'img/logoSinFondo.png' %}" alt="Logo ICBF Conecta"/>
  <nav>
    <ul>
      <li><a href="{% url 'madre_dashboard' %}"><i class="fas fa-home"></i> Inicio</a></li>
      <li><a href="{% url 'planeaciones:lista_planeaciones' %}"><i class="fas fa-book"></i> Planeaciones</a></li>
      <li>
        <form method="post" action="{% url 'logout' %}">
          {% csrf_token %}
          <button type="submit"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</button>
        </form>
      </li>
    </ul>
  </nav>
</header>

<div class="main-title">Detalle de Planeación</div>

<div class="info-cards">
  <div class="card">
    <label>Fecha</label>
    <p>{{ planeacion.fecha }}</p>
  </div>
  <div class="card">
    <label>Nombre de la Experiencia</label>
    <p>{{ planeacion.nombre_experiencia }}</p>
  </div>
  <div class="card">
    <label>Intencionalidad Pedagógica</label>
    <p>{{ planeacion.intencionalidad_pedagogica }}</p>
  </div>
  <div class="card">
    <label>Dimensiones Asignadas</label>
    {% if planeacion.dimensiones.all %}
      <p>{% for dim in planeacion.dimensiones.all %}{{ dim.nombre }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
    {% else %}
      <p>No se han asignado dimensiones.</p>
    {% endif %}
  </div>
</div>

<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th>Materiales</th>
        <th>Ambiente</th>
        <th>Inicio</th>
        <th>Desarrollo</th>
        <th>Cierre</th>
        <th>Observaciones</th>
        <th>Documentación</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><p>{{ planeacion.materiales_utilizar }}</p></td>
        <td><p>{{ planeacion.ambiente_educativo }}</p></td>
        <td><p>{{ planeacion.experiencia_inicio }}</p></td>
        <td><p>{{ planeacion.experiencia_pedagogica }}</p></td>
        <td><p>{{ planeacion.cierre_experiencia }}</p></td>
        <td><p>{{ planeacion.situaciones_presentadas }}</p></td>
        <td>
          <div class="documentos">
            {% if documentos %}
              {% for doc in documentos %}
                <img src="{{ doc.imagen.url }}" alt="Evidencia {{ forloop.counter }}">
              {% endfor %}
            {% else %}
              <p>No se ha subido evidencia.</p>
            {% endif %}
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div style="text-align:center;">
  <a href="{% url 'planeaciones:lista_planeaciones' %}" class="btn-volver">Volver</a>
</div>

</body>
</html>
